@using MovieStar.Models
@model MovieStar.ViewModels.AllFilmsVM

@foreach (var item in Model.Films)
{
    <div class="col-md-12 mt-5">
        <div class="name">
            <h4>@item.Name</h4>
        </div>
        <div class="inner">
            <div class="link_image">
                <a href="/Film/Single/@item.ID">
                    <img src="~/Source/images/@item.Main_Img" alt="">
                    <span class="dublaj" style="background-color:@item.Dublaj.Color">@item.Dublaj.Name</span>
                </a>
            </div>
            <div class="link_video">
                <a href="/Film/Single/@item.ID">
                    <img src="~/Source/images/@item.Video_Img" alt="">
                    <span class="play"></span>
                    <span class="layout"></span>
                    <span class="length">@item.Length</span>
                </a>
            </div>
            <div class="about">
                <dl>
                    <dt>Year</dt>
                    <dd>@item.Year.Value.Year</dd>
                    <dt>IMDB</dt>
                    <dd>@item.IMDB</dd>
                    <dt>Country</dt>
                    <dd>
                        @{ var d = 0; }
                        @foreach (var c in Model.Country_of_Film.Where(f => f.FilmID == item.ID))
                        {
                            d++;
                            <a href="/Film/Country/@c.Country.Name">@c.Country.Name@(d < Model.Country_of_Film.Where(f => f.CountryID == item.ID).ToArray().Length ? "," : "" ) </a>
                        }
                    </dd>
                    <dt>Genre</dt>
                    <dd>
                        @{ var i = 0; }
                        @foreach (var g in Model.Genres_of_Film.Where(f => f.FilmID == item.ID))
                        {
                            i++;
                            <a href="/Film/Genre/@g.Genre.Name">@g.Genre.Name@(i < Model.Genres_of_Film.Where(f => f.FilmID == item.ID).ToArray().Length ? "," : "" ) </a>
                        }
                    </dd>
                    <dt>Views</dt>
                    <dd>
                        <i class="fas fa-eye"></i>@item.ViewCount
                    </dd>
                </dl>
            </div>
            @if (Session["user"] != null && item.SavedFilms.Where(s => s.UserID == ((User)Session["user"]).ID).Count() == 1)
            {
                <i class="fas fa-bookmark save_icon"></i>
                <input type="hidden" name="filmid" value="@item.ID" />
            }
            else if (Session["user"] != null && item.SavedFilms.Where(s => s.UserID == ((User)Session["user"]).ID).Count() == 0)
            {
                <i class="far fa-bookmark save_icon"></i>
                <input type="hidden" name="filmid" value="@item.ID" />
            }
        </div>
    </div>
}
